{
  "workflowName": "CommitReview",
  "description": "Simplified commit review workflow with AI analysis and Slack notifications",
  "version": "2.0",
  "fileName": "commit-workflow.json",
  "triggers": {
    "events": ["push", "manual_review"]
  },
  "workflow": {
    "steps": [
      {
        "id": "github_commit",
        "name": "GitHub Commit",
        "plugin": "GitHub",
        "function": "GetCommitDetails",
        "required": true,
        "parameters": {
          "includeFiles": true,
          "includeDiff": true
        }
      },
      {
        "id": "code_review",
        "name": "AI Code Review",
        "plugin": "CodeReview",
        "function": "ReviewCommit",
        "required": true,
        "dependsOn": ["github_commit"],
        "parameters": {
          "includeSecurityCheck": true,
          "includeComplexityAnalysis": true,
          "includeTestCoverage": false
        }
      },
      {
        "id": "slack_notification",
        "name": "Slack Notification",
        "plugin": "Slack",
        "function": "SendCodeReviewSummary",
        "required": false,
        "dependsOn": ["code_review"],
        "parameters": {
          "channel": "@darko.martinovic",
          "template": "commit-review-template",
          "includeMetrics": true,
          "reviewData": "{{results.code_review.result}}"
        }
      }
    ]
  },
  "templates": {
    "commit-review-template": "ï¿½ **Commit Review Complete**\n\nCommit: {{commitSha}}\nAuthor: {{author}}\nRepository: {{repository}}\n\nðŸ“Š **Issues Found**: {{issueCount}}\nðŸ“ˆ **Severity**: {{highestSeverity}}\n\n{{#if hasIssues}}ï¿½ Please review the identified issues{{else}}âœ… No issues found - great work!{{/if}}"
  }
}
